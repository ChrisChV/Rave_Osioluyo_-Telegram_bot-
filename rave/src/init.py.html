<html><head>
<title>init.py</title>
<meta name="Generator" content="htmlizer/[Twisted, version 18.4.0]" />
<link rel="alternate" href="init.py" type="text/x-python" />

</head>
<body>
<pre><span class="py-src-keyword">import</span> <span class="py-src-variable">sad</span>
<span class="py-src-keyword">import</span> <span class="py-src-variable">os</span>
<span class="py-src-keyword">import</span> <span class="py-src-variable">json</span>
<span class="py-src-keyword">import</span> <span class="py-src-variable">requests</span>

<span class="py-src-keyword">def</span> <span class="py-src-identifier">init</span>():
    <span class="py-src-variable">command</span> = <span class="py-src-string">"mkidr -p "</span> + <span class="py-src-variable">sad</span>.<span class="py-src-variable">INSTALL_PATH</span>
    <span class="py-src-variable">os</span>.<span class="py-src-variable">system</span>(<span class="py-src-variable">command</span>)
    <span class="py-src-variable">token</span> = <span class="py-src-variable">raw_input</span>(<span class="py-src-string">"Write the token here: "</span>)
    <span class="py-src-variable">setToken</span>(<span class="py-src-variable">token</span>)
    <span class="py-src-variable">tokenFile</span> = <span class="py-src-variable">open</span>(<span class="py-src-variable">sad</span>.<span class="py-src-variable">TOKEN_FILE</span>, <span class="py-src-string">'w'</span>)
    <span class="py-src-variable">tokenFile</span>.<span class="py-src-variable">write</span>(<span class="py-src-variable">token</span>)
    <span class="py-src-variable">tokenFile</span>.<span class="py-src-variable">close</span>()


<span class="py-src-keyword">def</span> <span class="py-src-identifier">setToken</span>(<span class="py-src-parameter">token</span>):
    <span class="py-src-variable">jsonStructureFile</span> = <span class="py-src-variable">open</span>(<span class="py-src-variable">sad</span>.<span class="py-src-variable">JSON_STRUCTURE_FILE_NAME</span>, <span class="py-src-string">'r'</span>)
    <span class="py-src-variable">data</span> = <span class="py-src-variable">json</span>.<span class="py-src-variable">load</span>(<span class="py-src-variable">jsonStructureFile</span>)

    <span class="py-src-variable">data</span>[<span class="py-src-string">"message"</span>][<span class="py-src-string">"text"</span>] = <span class="py-src-string">"/_setToken "</span> + <span class="py-src-variable">token</span>
    <span class="py-src-comment">#data["message"]["id"] = 123456</span>
    <span class="py-src-comment">#data["message"]["chat"]["id"] = 123456</span>
    <span class="py-src-variable">jsonData</span> = <span class="py-src-variable">json</span>.<span class="py-src-variable">dumps</span>(<span class="py-src-variable">data</span>)
    <span class="py-src-variable">res</span> = <span class="py-src-variable">requests</span>.<span class="py-src-variable">post</span>(<span class="py-src-variable">sad</span>.<span class="py-src-variable">WEB_HOOK_URL</span>, <span class="py-src-variable">json</span> = <span class="py-src-variable">data</span>)

<span class="py-src-variable">init</span>()
</pre>
</body>